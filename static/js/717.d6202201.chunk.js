"use strict";(self.webpackChunkmern=self.webpackChunkmern||[]).push([[717],{1099:function(e,t,a){a.r(t);var r=a(4165),n=a(5861),i=a(9439),s=a(2810),l=(a(8055),a(1595)),c=a(3999),d=a(5094),u=a(9508),o=a(2791),p=a(3108),v=a(5434),f=a(9895),x=a(7212),m=a(184);t.default=function(){var e=(0,o.useContext)(p.V),t=(0,u.x)(),a=t.isLoading,h=t.error,g=t.sendRequest,j=t.clearError,Z=(0,d.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),b=(0,i.Z)(Z,2),k=b[0],P=b[1],y=function(){var t=(0,n.Z)((0,r.Z)().mark((function t(a){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,(n=new FormData).append("title",k.inputs.title.value),n.append("description",k.inputs.description.value),n.append("address",k.inputs.address.value),n.append("creator",e.userId),n.append("image",k.inputs.image.value),t.next=10,g("".concat("https://mern-gch-dac0676b4506.herokuapp.com/api","/places"),"POST",n,{Authorization:"Bearer "+e.token});case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(1);case 14:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(v.Z,{error:h,onClear:j}),(0,m.jsxs)("form",{className:"place-form",onSubmit:y,children:[a&&(0,m.jsx)(f.Z,{asOverlay:!0}),(0,m.jsx)(s.Z,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,l.hg)()],errorText:"Please enter a valid title.",onInput:P}),(0,m.jsx)(s.Z,{id:"address",element:"input",type:"text",label:"Address",validators:[(0,l.hg)()],errorText:"Please enter a valid address.",onInput:P}),(0,m.jsx)(s.Z,{id:"description",element:"textarea",label:"Description",validators:[(0,l.CP)(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:P}),(0,m.jsx)(x.Z,{id:"image",onInput:P,errorText:"Please provide an image"}),(0,m.jsx)(c.Z,{type:"submit",disabled:!k.isValid,children:"ADD PLACE"})]})]})}},7212:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(9439),n=a(2791),i=a(3999),s=a(184);var l=function(e){var t=(0,n.useState)(),a=(0,r.Z)(t,2),l=a[0],c=a[1],d=(0,n.useState)(),u=(0,r.Z)(d,2),o=u[0],p=u[1],v=(0,n.useState)(!1),f=(0,r.Z)(v,2),x=f[0],m=f[1],h=(0,n.useRef)();return(0,n.useEffect)((function(){if(l){var e=new FileReader;e.onload=function(){p(e.result)},e.readAsDataURL(l)}}),[l]),(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("input",{ref:h,type:"file",id:e.id,style:{display:"none"},accept:".jpg,.png,.jpeg",onChange:function(t){var a,r=x;t.target.files&&1===t.target.files.length?(a=t.target.files[0],c(a),m(!0),r=!0):(m(!1),r=!1),e.onInput(e.id,a,r)}}),(0,s.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,s.jsx)("div",{className:"image-upload__preview",children:o?(0,s.jsx)("img",{src:o,alt:"Preview"}):(0,s.jsx)("p",{children:"Please pick an image."})}),(0,s.jsx)(i.Z,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!x&&(0,s.jsx)("p",{children:e.errorText})]})}},8055:function(){}}]);
//# sourceMappingURL=717.d6202201.chunk.js.map