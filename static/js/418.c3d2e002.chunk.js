"use strict";(self.webpackChunkmern=self.webpackChunkmern||[]).push([[418],{7212:function(e,a,n){n.d(a,{Z:function(){return l}});var t=n(9439),r=n(2791),s=n(3999),i=n(184);var l=function(e){var a=(0,r.useState)(),n=(0,t.Z)(a,2),l=n[0],u=n[1],c=(0,r.useState)(),o=(0,t.Z)(c,2),p=o[0],d=o[1],m=(0,r.useState)(!1),v=(0,t.Z)(m,2),x=v[0],f=v[1],h=(0,r.useRef)();return(0,r.useEffect)((function(){if(l){var e=new FileReader;e.onload=function(){d(e.result)},e.readAsDataURL(l)}}),[l]),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("input",{ref:h,type:"file",id:e.id,style:{display:"none"},accept:".jpg,.png,.jpeg",onChange:function(a){var n,t=x;a.target.files&&1===a.target.files.length?(n=a.target.files[0],u(n),f(!0),t=!0):(f(!1),t=!1),e.onInput(e.id,n,t)}}),(0,i.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,i.jsx)("div",{className:"image-upload__preview",children:p?(0,i.jsx)("img",{src:p,alt:"Preview"}):(0,i.jsx)("p",{children:"Please pick an image."})}),(0,i.jsx)(s.Z,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!x&&(0,i.jsx)("p",{children:e.errorText})]})}},3373:function(e,a,n){n.d(a,{Z:function(){return r}});n(2791);var t=n(184),r=function(e){return(0,t.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}},4191:function(e,a,n){n.r(a),n.d(a,{default:function(){return j}});var t=n(4165),r=n(5861),s=n(1413),i=n(9439),l=n(2791),u=n(3373),c=n(2810),o=n(3999),p=n(1595),d=n(5094),m=n(3108),v=n(9895),x=n(5434),f=n(9508),h=n(7212),g=n(184),j=function(){var e=(0,l.useContext)(m.V),a=(0,l.useState)(!0),n=(0,i.Z)(a,2),j=n[0],Z=n[1],w=(0,f.x)(),k=w.isLoading,b=w.error,y=w.sendRequest,I=w.clearError,P=(0,d.c)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),N=(0,i.Z)(P,3),C=N[0],S=N[1],T=N[2],O=function(){var a=(0,r.Z)((0,t.Z)().mark((function a(n){var r,s,i;return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!j){a.next=13;break}return a.prev=2,a.next=5,y("".concat("https://mern-gch-dac0676b4506.herokuapp.com/api","/users/login"),"POST",JSON.stringify({email:C.inputs.email.value,password:C.inputs.password.value}),{"Content-type":"application/json"});case 5:r=a.sent,e.login(r.userId,r.token),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(2);case 11:a.next=27;break;case 13:return a.prev=13,(s=new FormData).append("email",C.inputs.email.value),s.append("name",C.inputs.name.value),s.append("password",C.inputs.password.value),s.append("image",C.inputs.image.value),a.next=21,y("".concat("https://mern-gch-dac0676b4506.herokuapp.com/api","/users/signup"),"POST",s);case 21:i=a.sent,e.login(i.userId,i.token),a.next=27;break;case 25:a.prev=25,a.t1=a.catch(13);case 27:case"end":return a.stop()}}),a,null,[[2,9],[13,25]])})));return function(e){return a.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Z,{error:b,onClear:I}),(0,g.jsxs)(u.Z,{className:"authentication",children:[k&&(0,g.jsx)(v.Z,{asOverlay:!0}),(0,g.jsx)("h2",{children:"Login Required"}),(0,g.jsx)("hr",{}),(0,g.jsxs)("form",{onSubmit:O,children:[!j&&(0,g.jsx)(c.Z,{element:"input",id:"name",type:"text",label:"Your Name",validators:[(0,p.hg)()],errorText:"Please enter a name.",onInput:S}),!j&&(0,g.jsx)(h.Z,{onInput:S,id:"image",center:!0,errorText:"Please provide an image"}),(0,g.jsx)(c.Z,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[(0,p.Ox)()],errorText:"Please enter a valid email address.",onInput:S}),(0,g.jsx)(c.Z,{element:"input",id:"password",type:"password",label:"Password",validators:[(0,p.CP)(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:S}),(0,g.jsx)(o.Z,{type:"submit",disabled:!C.isValid,children:j?"LOGIN":"SIGNUP"})]}),(0,g.jsxs)(o.Z,{inverse:!0,onClick:function(){j?T((0,s.Z)((0,s.Z)({},C.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):T((0,s.Z)((0,s.Z)({},C.inputs),{},{name:void 0,image:void 0}),C.inputs.email.isValid&&C.inputs.password.isValid),Z((function(e){return!e}))},children:["SWITCH TO ",j?"SIGNUP":"LOGIN"]})]})]})}}}]);
//# sourceMappingURL=418.c3d2e002.chunk.js.map